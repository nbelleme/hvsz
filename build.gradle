plugins {
    id 'org.springframework.boot' version "1.5.4.RELEASE" apply false
}


ext {
    javaVersion = '1.8'
    checkstyleVersion = '7.5'

    springBootVersion = '1.5.4.RELEASE'
    slf4jApi = '1.7.25'
    mongoJack = '2.7.0'
    dozerVersion = '5.5.1'
    springDataMongoDbVersion = '1.10.6.RELEASE'

}


subprojects {
    apply plugin: 'java-library'
    apply plugin: 'checkstyle'

    sourceCompatibility = "$javaVersion"
    targetCompatibility = "$javaVersion"
    group = 'nbelleme'
    version = '1.0-SNAPSHOT'

    repositories {
        mavenLocal()
        mavenCentral()
    }

    checkstyle {
        toolVersion = "$checkstyleVersion"
        configFile = rootProject.file('config/checkstyle/checkstyle.xml')
        checkstyleTest.enabled = false
    }

    dependencies {
        compile "org.springframework.boot:spring-boot-starter-web:$springBootVersion"
        testCompile "org.springframework.boot:spring-boot-starter-test:$springBootVersion"
        compile group: 'org.springframework.data', name: 'spring-data-jpa', version: '1.11.6.RELEASE'
    }

    compileJava.options*.compilerArgs = [
            '-Xlint:cast',
            '-Xlint:classfile',
            '-Xlint:deprecation',
            '-Xlint:dep-ann',
            '-Xlint:divzero',
            '-Xlint:empty',
            '-Xlint:fallthrough',
            '-Xlint:finally',
            '-Xlint:overrides',
            '-Xlint:path',
            '-Xlint:processing',
            '-Xlint:rawtypes',
            '-Xlint:serial',
            '-Xlint:static',
            '-Xlint:try',
            '-Xlint:unchecked',
            '-Xlint:varargs',
            '-Xlint:-options',
            '-Werror'
    ]
}

project(':model') {
    dependencies {
        compile project(':commons')
        compile "org.mongojack:mongojack:$mongoJack"
        compile "org.springframework.data:spring-data-mongodb:$springDataMongoDbVersion"

    }
}

project(':services') {
    dependencies {
        api "org.slf4j:slf4j-api:$slf4jApi"
        compile project(':persistence')
        compile "net.sf.dozer:dozer:$dozerVersion"

    }
}

project(':commons') {
    dependencies {
        compile project(':model')
    }

}

project(':persistence') {
    dependencies {
        compile project(':model')
        api "org.slf4j:slf4j-api:$slf4jApi"
        compile "org.mongojack:mongojack:$mongoJack"
        compile "org.springframework.boot:spring-boot-starter-data-mongodb:$springBootVersion"
    }
}

project(':webservices') {
    apply plugin: 'org.springframework.boot'

    configurations {
        jar.archiveName = 'hvsz-server.jar'
    }

    dependencies {
        compile project(':services')
    }
}